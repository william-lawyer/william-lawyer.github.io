<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Telegram WebApp UI</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      background: #0b0b0d;
      font-family: 'Inter', sans-serif;
      color: #fff;
    }
    .app-container {
      max-width: 320px;
      margin: auto;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    .profile-section {
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-items: center;
      margin-top: 4rem;
    }
    .avatar {
      background: #d9d9d9;
      border-radius: 50%;
      width: 59px;
      height: 59px;
    }
    .user-name {
      font-size: 16px;
      font-weight: 400;
      text-align: center;
    }
    .registration-date {
      font-size: 12px;
      font-weight: 300;
      opacity: 0.7;
      text-align: center;
    }
    .code-section {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 8rem;
      align-items: center;
    }
    .code-label {
      font-size: 16px;
      font-weight: 300;
      opacity: 0.7;
    }
    .code-box {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: 20px;
      padding: 24px 110px;
      display: flex;
      justify-content: center;
    }
    .code-value {
      font-size: 16px;
      font-weight: 300;
    }
    .bottom-nav {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 20px;
      padding: 16px 0;
      display: flex;
      gap: 80px;
      justify-content: center;
      margin-top: auto;
    }
    .nav-item {
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-items: center;
    }
    .icon-container {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .icon {
      width: 30px;
      height: 30px;
      object-fit: contain;
    }
    .events-panel, .wallet-panel {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #151516;
      border-radius: 40px 40px 0 0;
      padding: 24px 24px 100px;
      max-height: 80vh;
      overflow-y: auto;
      transform: translateY(100%);
      transition: transform 0.3s ease-in-out;
      z-index: 1000;
      scrollbar-width: none;
    }
    .events-panel::-webkit-scrollbar, .wallet-panel::-webkit-scrollbar { display: none; }
    .events-panel.open, .wallet-panel.open { transform: translateY(0); }
    .event-list {
      display: flex;
      flex-direction: column;
      gap: 32px;
      padding: 16px;
    }
    .event-item {
      display: flex;
      flex-direction: column;
      gap: 32px;
      width: 100%;
    }
    .event-image {
      background: #d9d9d9;
      border-radius: 24px;
      height: 300px;
    }
    .event-details {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .event-header {
      display: flex;
      justify-content: space-between;
    }
    .event-title, .event-price {
      font-size: 24px;
      font-weight: 500;
    }
    .event-date {
      font-size: 16px;
      font-weight: 300;
      opacity: 0.7;
    }
    .event-address-container {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .event-address {
      display: flex;
      gap: 6px;
      align-items: center;
      flex: 1;
    }
    .address-label, .address-text {
      color: #ffffffbe;
      font-size: 16px;
      font-weight: 300;
      opacity: 0.7;
    }
    .address-text {
      text-decoration: underline;
      overflow-wrap: break-word;
    }
    .copy-icon-container {
      width: 20px;
      height: 20px;
      cursor: pointer;
    }
    .buy-ticket-button {
      background: linear-gradient(95.35deg, #5541d9 0%, #7864ff 100%);
      border-radius: 18px;
      padding: 20px 28px;
      font-size: 18px;
      font-weight: 500;
      text-align: center;
    }
    .notification {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%) translateY(100%);
      background: rgba(255, 255, 255, 0.9);
      color: #0b0b0d;
      padding: 12px 24px;
      border-radius: 12px;
      font-size: 14px;
      opacity: 0;
      transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
      z-index: 1001;
    }
    .notification.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
    .wallet-container {
      display: flex;
      flex-direction: column;
      gap: 30px;
      max-width: 300px;
      margin: 0 auto;
    }
    .wallet-image {
      width: 100%;
      margin-bottom: -88px;
    }
    .balance-section {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .balance-label {
      font-size: 16px;
      font-weight: 300;
      opacity: 0.7;
    }
    .balance-amount {
      font-size: 30px;
      font-weight: 400;
    }
    .transaction-section {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .pay-row, .receive-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .pay-details, .receive-details {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .pay-label, .receive-label {
      font-size: 16px;
      font-weight: 400;
      opacity: 0.7;
    }
    .pay-amount-container, .receive-amount-container {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .pay-amount-input, .receive-amount-input {
      background: transparent;
      border: none;
      color: #fff;
      font-size: 27px;
      font-weight: 500;
      width: 200px;
      outline: none;
    }
    .receive-amount-input::placeholder {
      color: #ffffff;
      opacity: 0.5;
    }
    .pay-amount-symbol, .receive-amount-symbol {
      font-size: 27px;
      font-weight: 500;
    }
    .circle-pay, .circle-receive {
      background: transparent;
      border-radius: 50%;
      width: 20px;
      height: 20px;
    }
    .divider {
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      width: 100%;
    }
    .sort-icon-container {
      width: 24px;
      height: 24px;
      position: absolute;
      left: 50%;
      top: 70px;
      transform: translateX(-50%);
    }
    .top-up-button {
      background: #5541d9;
      border-radius: 15px;
      padding: 22px 24px;
      text-align: center;
      font-size: 14px;
      font-weight: 600;
    }
    @media (max-width: 768px) {
      .app-container {
        padding: 3rem 0;
        justify-content: space-between;
      }
      .profile-section { margin-top: 0; padding-top: 5rem; }
      .code-section { margin-top: -4rem; }
      .bottom-nav {
        position: sticky;
        bottom: 0;
        margin-top: 0;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <div class="profile-section">
      <div class="avatar"></div>
      <div class="user-name">Имя Фамилия</div>
      <div class="registration-date">Дата регистрации: 21 июня 2024</div>
    </div>
    <div class="code-section">
      <div class="code-label">Мой код:</div>
      <div class="code-box">
        <div class="code-value">XXXX-XXXX</div>
      </div>
    </div>
    <div class="bottom-nav">
      <div class="nav-item">
        <div class="icon-container">
          <a href="#"><img class="icon" src="./icons/user.svg"></a>
        </div>
      </div>
      <div class="nav-item">
        <div class="icon-container">
          <a href="#" class="apps-link"><img class="icon" src="./icons/apps.svg"></a>
        </div>
      </div>
      <div class="nav-item">
        <div class="icon-container">
          <a href="#" class="wallet-link"><img class="icon" src="./icons/wallet.svg"></a>
        </div>
      </div>
    </div>
    <div class="events-panel" id="appsPanel">
      <div class="event-list">
        <div class="event-item">
          <div class="event-image"></div>
          <div class="event-details">
            <div class="event-header">
              <div class="event-title">Название</div>
              <div class="event-price">1000$</div>
            </div>
            <div class="event-date">Дата проведения: 21 июня 2024</div>
            <div class="event-address-container">
              <div class="event-address">
                <div class="address-label">Адрес:</div>
                <a class="address-text" href="#" target="_blank">Рочдельская улица, 15с35</a>
              </div>
              <div class="copy-icon-container">
                <img class="copy-icon" src="./icons/copy.svg">
              </div>
            </div>
            <div class="buy-ticket-button">Купить билет</div>
          </div>
        </div>
        <div class="event-item">
          <div class="event-image"></div>
          <div class="event-details">
            <div class="event-header">
              <div class="event-title">Название</div>
              <div class="event-price">1000$</div>
            </div>
            <div class="event-date">Дата проведения: 21 июня 2024</div>
            <div class="event-address-container">
              <div class="event-address">
                <div class="address-label">Адрес:</div>
                <a class="address-text" href="#" target="_blank">Рочдельская улица, 15с35</a>
              </div>
              <div class="copy-icon-container">
                <img class="copy-icon" src="./icons/copy.svg">
              </div>
            </div>
            <div class="buy-ticket-button">Купить билет</div>
          </div>
        </div>
      </div>
    </div>
    <div class="wallet-panel" id="walletPanel">
      <div class="wallet-container">
        <img class="wallet-image" src="./icons/card.png">
        <div class="balance-section">
          <div class="balance-label">Баланс:</div>
          <div class="balance-amount">1000$</div>
        </div>
        <div class="transaction-section">
          <div class="pay-row">
            <div class="pay-details">
              <div class="pay-label">Заплачу</div>
              <div class="pay-amount-container">
                <input type="number" class="pay-amount-input" value="1000" min="0" step="1">
              </div>
            </div>
            <div class="circle-pay"></div>
          </div>
          <div class="divider"></div>
          <div class="receive-row">
            <div class="receive-details">
              <div class="receive-label">Получу</div>
              <div class="receive-amount-container">
                <input type="number" class="receive-amount-input" value="1100" min="0" step="1">
              </div>
            </div>
            <div class="circle-receive"></div>
          </div>
          <div class="sort-icon-container">
          </div>
        </div>
        <div class="top-up-button">Пополнить баланс</div>
      </div>
    </div>
    <div class="notification" id="copyNotification">Адрес скопирован!</div>
  </div>
  <script>
    window.onload = () => {
      const tg = window.Telegram.WebApp;
      const user = tg.initDataUnsafe?.user;
      document.querySelector('.user-name').textContent = user ? `${user.first_name}${user.last_name ? ' ' + user.last_name : ''}` : 'Имя неизвестно';
      if (user?.photo_url) {
        document.querySelector('.avatar').style.background = `url(${user.photo_url}) center / cover no-repeat`;
      }
      document.querySelector('.registration-date').textContent = `Дата регистрации: ${new Date().toLocaleDateString('ru-RU', { day: 'numeric', month: 'long', year: 'numeric' })}`;
      const appsPanel = document.querySelector('#appsPanel');
      const walletPanel = document.querySelector('#walletPanel');
      document.querySelector('.apps-link').addEventListener('click', e => {
        e.preventDefault();
        appsPanel.classList.toggle('open');
        walletPanel.classList.remove('open');
      });
      document.querySelector('.wallet-link').addEventListener('click', e => {
        e.preventDefault();
        walletPanel.classList.toggle('open');
        appsPanel.classList.remove('open');
      });
      document.addEventListener('click', e => {
        if (!appsPanel.contains(e.target) && !e.target.closest('.apps-link')) appsPanel.classList.remove('open');
        if (!walletPanel.contains(e.target) && !e.target.closest('.wallet-link')) walletPanel.classList.remove('open');
      });
      document.querySelectorAll('.event-address-container').forEach(container => {
        const addressElement = container.querySelector('.address-text');
        addressElement.href = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(addressElement.textContent)}`;
        container.querySelector('.copy-icon-container').addEventListener('click', () => {
          navigator.clipboard.writeText(addressElement.textContent).then(() => {
            const notification = document.querySelector('#copyNotification');
            notification.classList.add('show');
            setTimeout(() => notification.classList.remove('show'), 2000);
          }).catch(err => console.error('Failed to copy: ', err));
        });
      });
      tg.expand();
    };
  </script>
</body>
</html>
